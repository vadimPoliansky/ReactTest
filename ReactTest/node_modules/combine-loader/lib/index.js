'use strict';

var _loaderUtils = require('loader-utils');

var _loaderUtils2 = _interopRequireDefault(_loaderUtils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

module.exports = function () {};
module.exports.pitch = function (remainingRequest) {
  var _this = this;

  this.cacheable();
  var loaders = _loaderUtils2.default.parseQuery(this.query);

  var keysValues = Object.keys(loaders).map(function (key) {
    var loader = Array.isArray(loaders[key]) ? loaders[key].join('!') : loaders[key];
    var request = _loaderUtils2.default.stringifyRequest(_this, '-!' + loader + '!' + remainingRequest);
    return '"' + key + '": require(' + request + ')';
  });
  return 'module.exports = {' + keysValues.join(',') + '}';
};